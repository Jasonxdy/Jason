<!DOCTYPE html>
<html lang="ko">
    <head>
    <meta charset="UTF-8">
        <title>11. 클로저(Closure)</title>
    </head>
    <body>
        <h1>클로저(Closure)</h1>

        <h3>클로저란?</h3>

        - 특정 함수(testFn())의 지역 변수(testFnVal)가 <br>
         내부 함수(innerFn())에 포함되어 있고, <br>
         특정 함수가(testFn())이 내부 함수(innerFn())를 리턴한 경우<br>
         리턴된 내부 함수(innerFn())를 클로저(Closure)라고 함.<br><br>
        
        - 지역 변수의 scope(범위, 생존 범위)는 선언된 함수 내부로<br>
        함수가 실행될 때 생성되고, 함수가 종료될 때 사라진다.<br><br>

        - 하지만 클로저(Closure)를 이용하면 위 규칙을 무시하고 <br>
         사라진 지역변수에 접근이 가능해짐.<br>
         그리고 이러한 변수를 자유 변수(free variable)이라고 함.

        <br><br>
        <button onclick="testFn('홍길동')();">실행확인</button>
        <script>
            function testFn(name){

                var testFnVal = name + "님 환영합니다!!";

                function innerFn(){
                    alert(testFnVal);
                }
                return innerFn; // --> 클로저(Closure)
            }
        </script>

        <hr>

        <h4>Closure Test</h4>
        <button onclick="test3(this);">Javascript - Function</button><br>
        <button onclick="test3(this);">Javascript - Closure</button><br>
        <button onclick="test3(this);">Javascript - Object</button><br>

        <script>
            function test2(subject){
                var output = "오늘 배울 내용은 "+ subject + "입니다."
                return function(){
                    return output + "힘내시죠ㅠㅠ";
                }
            }

            function test3(button){
                var subject = button.innerHTML;
                alert( test2(subject)() );
            }

        </script>
    </body>
</html>